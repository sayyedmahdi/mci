"use strict";(globalThis["webpackChunkmci"]=globalThis["webpackChunkmci"]||[]).push([[805],{805:(e,o,s)=>{s.r(o),s.d(o,{default:()=>$});var t=s(3673),n=s(8880);const i=e=>((0,t.dD)("data-v-2f3f8ab3"),e=e(),(0,t.Cn)(),e),r={class:"row wrap-layout"},a=i((()=>(0,t._)("div",{class:"col-12",style:{width:"100%",height:"70px"}},null,-1))),l={class:"col-xs-12 col-sm-4 offset-xs-0 offset-sm-4 self-center"},d={class:"login q-gutter-sm"};function m(e,o,s,i,m,u){const p=(0,t.up)("q-icon"),c=(0,t.up)("q-input"),g=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.iD)("div",r,[a,(0,t._)("div",l,[(0,t._)("div",d,[(0,t._)("div",null,[(0,t.Wm)(c,{outlined:"",autofocus:"",modelValue:m.loginForm.username,"onUpdate:modelValue":o[0]||(o[0]=e=>m.loginForm.username=e),label:"Username",error:i.v$.loginForm.username.$error},{prepend:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"person"})])),_:1},8,["modelValue","error"])]),(0,t._)("div",null,[(0,t.Wm)(c,{outlined:"",modelValue:m.loginForm.password,"onUpdate:modelValue":o[2]||(o[2]=e=>m.loginForm.password=e),type:m.isPwd?"password":"text",label:"Password",error:i.v$.loginForm.password.$error,onKeyup:(0,n.D2)(u.login,["enter"])},{prepend:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"lock"})])),append:(0,t.w5)((()=>[(0,t.Wm)(p,{name:m.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[1]||(o[1]=e=>m.isPwd=!m.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type","error","onKeyup"])]),(0,t._)("div",null,[(0,t.Wm)(g,{color:"primary",class:"login-btn full-width",label:e.einloggen,onClick:u.login},null,8,["label","onClick"])])])])])}var u=s(7191),p=s(8308);const c={name:"Login",meta:{title:"Login â€“ FightSearch 0.1"},setup(){return{v$:(0,u.ZP)()}},data(){return{isPwd:!0,message:"",error:!1,loginForm:{username:"",password:""}}},validations(){return{loginForm:{username:{required:p.C1},password:{required:p.C1}}}},methods:{async login(){const e=await this.v$.$validate();if(e){let e=this.$q.cookies,o=this.$q.localStorage,s=this.$router,t=this.$q,n=this;this.$api.post("user/login.php",{Username:this.loginForm.username,Password:this.loginForm.password}).then((function(i){console.log(i),1!=!i.data.Type?(e.set("mcisitetoken",i.data.Token,{path:"/"}),o.set("user",JSON.stringify(i.data)),n.$store.dispatch("SetUser",i.data),n.$api.defaults.headers.common["Token"]=i.data.Token,s.push("/admin")):t.notify({type:"negative",timeout:3e3,message:"Login not possible",position:"bottom-right"})})).catch((function(e){n.$helper.logError(e),t.notify({type:"negative",timeout:3e3,message:"Login not possible",position:"bottom-right"})}))}}}};var g=s(4260),h=s(4842),w=s(4554),f=s(4607),v=s(7518),b=s.n(v);const y=(0,g.Z)(c,[["render",m],["__scopeId","data-v-2f3f8ab3"]]),$=y;b()(c,"components",{QInput:h.Z,QIcon:w.Z,QBtn:f.Z})}}]);