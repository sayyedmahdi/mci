"use strict";(globalThis["webpackChunkmci"]=globalThis["webpackChunkmci"]||[]).push([[868],{9868:(e,t,l)=>{l.r(t),l.d(t,{default:()=>R});var a=l(3673),o=l(2323);const i={class:"row"},n={class:"row","data-html2canvas-ignore":""},d=(0,a.Uk)(" New "),u=(0,a.Uk)("Edit"),r=(0,a.Uk)("Delete"),s=(0,a.Uk)(" Store "),p=(0,a.Uk)(" Do you really want to delete the row? "),m=(0,a.Uk)(" New Store ");function c(e,t,l,c,w,f){const h=(0,a.up)("q-icon"),g=(0,a.up)("q-input"),b=(0,a.up)("q-btn"),W=(0,a.up)("q-td"),k=(0,a.up)("q-item-section"),U=(0,a.up)("q-item"),_=(0,a.up)("q-list"),V=(0,a.up)("q-menu"),v=(0,a.up)("q-card-section"),T=(0,a.up)("q-select"),C=(0,a.up)("q-card"),$=(0,a.up)("q-dialog"),y=(0,a.up)("q-tr"),S=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(S,{title:"Stores",rows:w.data,columns:w.columns,"row-key":"ID",pagination:w.pagination,"onUpdate:pagination":t[7]||(t[7]=e=>w.pagination=e),loading:w.loading,filter:w.filter,onRequest:f.loadData,"binary-state-sort":"",style:{width:"100%"},flat:"",separator:"none","table-header-class":"table-header","title-class":"title-class"},{"top-right":(0,a.w5)((()=>[(0,a._)("div",n,[(0,a.Wm)(g,{outlined:"",dense:"",debounce:"300",modelValue:w.filter,"onUpdate:modelValue":t[0]||(t[0]=e=>w.filter=e),placeholder:"Search",class:"Search"},{append:(0,a.w5)((()=>[(0,a.Wm)(h,{name:"search"})])),_:1},8,["modelValue"]),(0,a.Wm)(b,{class:"float-right on-right new-button",onClick:t[1]||(t[1]=e=>f.newRow())},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{name:"add_circle_outline"}),d])),_:1})])])),body:(0,a.w5)((e=>[(0,a.Wm)(y,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{key:"Title",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.Title),1)])),_:2},1032,["props"]),(0,a.Wm)(W,{key:"Status",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(f.displayStatus(e.row.Status)),1)])),_:2},1032,["props"]),(0,a.Wm)(W,{key:"Url",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.Url),1)])),_:2},1032,["props"]),(0,a.Wm)(W,{key:"Action",props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{flat:"",icon:"more_horiz"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{"auto-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{dense:"",separator:"",style:{"min-width":"170px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{clickable:"",onClick:t=>f.editRow(e.row)},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"icon",name:"edit"})])),_:1}),(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[u])),_:1})])),_:2},1032,["onClick"]),(0,a.Wm)(U,{clickable:"",onClick:t=>e.row.deletePopup=!0},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"icon",name:"delete"})])),_:1}),(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[r])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,a.Wm)($,{modelValue:e.row.editPopup,"onUpdate:modelValue":t=>e.row.editPopup=t,persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{class:"detail-dialog"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{class:"detail-title"},{default:(0,a.w5)((()=>[s])),_:1}),(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(g,{outlined:"",autofocus:"",modelValue:w.edit.Title,"onUpdate:modelValue":t[2]||(t[2]=e=>w.edit.Title=e),label:"Title",error:c.v$.edit.Title.$error},null,8,["modelValue","error"])]),(0,a._)("div",null,[(0,a.Wm)(g,{outlined:"",autofocus:"",modelValue:w.edit.Url,"onUpdate:modelValue":t[3]||(t[3]=e=>w.edit.Url=e),label:"Url",error:c.v$.edit.Url.$error},null,8,["modelValue","error"])]),(0,a._)("div",null,[(0,a.Wm)(g,{outlined:"",autofocus:"",modelValue:w.edit.Token,"onUpdate:modelValue":t[4]||(t[4]=e=>w.edit.Token=e),label:"Token",error:c.v$.edit.Token.$error},null,8,["modelValue","error"])]),(0,a._)("div",null,[(0,a.Wm)(T,{outlined:"",modelValue:w.edit.Status,"onUpdate:modelValue":t[5]||(t[5]=e=>w.edit.Status=e),options:w.statusOptions,label:"Status","emit-value":"","map-options":""},null,8,["modelValue","options"])]),(0,a._)("div",null,[(0,a.Wm)(g,{outlined:"",autofocus:"",type:"textarea",modelValue:w.edit.Comments,"onUpdate:modelValue":t[6]||(t[6]=e=>w.edit.Comments=e),label:"Comments"},null,8,["modelValue"])])])),_:1}),(0,a.Wm)(v,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{flat:"",class:"save-btn q-mr-md",label:"Save",onClick:t=>{f.updateRow(e.row)}},null,8,["onClick"]),(0,a.Wm)(b,{flat:"",class:"cancel-btn",label:"Cancel",onClick:t=>e.row.editPopup=!1},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,a.Wm)($,{modelValue:e.row.deletePopup,"onUpdate:modelValue":t=>e.row.deletePopup=t,persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{class:"detail-dialog"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{class:"detail-title"},{default:(0,a.w5)((()=>[p])),_:1}),(0,a.Wm)(v,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{flat:"",class:"delete-btn q-mr-md",label:"Yes, Delete",onClick:t=>{f.deleteRow(e.row.ID),e.row.deletePopup=!1}},null,8,["onClick"]),(0,a.Wm)(b,{flat:"",class:"cancel-btn",label:"No, Cancel",onClick:t=>e.row.deletePopup=!1},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination","loading","filter","onRequest"]),(0,a.Wm)($,{modelValue:w.newPopup,"onUpdate:modelValue":t[15]||(t[15]=e=>w.newPopup=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{class:"detail-dialog"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{class:"detail-title"},{default:(0,a.w5)((()=>[m])),_:1}),(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(g,{outlined:"",autofocus:"",modelValue:w.edit.Title,"onUpdate:modelValue":t[8]||(t[8]=e=>w.edit.Title=e),label:"Title",error:c.v$.edit.Title.$error},null,8,["modelValue","error"])]),(0,a._)("div",null,[(0,a.Wm)(g,{outlined:"",autofocus:"",modelValue:w.edit.Url,"onUpdate:modelValue":t[9]||(t[9]=e=>w.edit.Url=e),label:"Url",error:c.v$.edit.Url.$error},null,8,["modelValue","error"])]),(0,a._)("div",null,[(0,a.Wm)(g,{outlined:"",autofocus:"",modelValue:w.edit.Token,"onUpdate:modelValue":t[10]||(t[10]=e=>w.edit.Token=e),label:"Token",error:c.v$.edit.Token.$error},null,8,["modelValue","error"])]),(0,a._)("div",null,[(0,a.Wm)(T,{outlined:"",modelValue:w.edit.Status,"onUpdate:modelValue":t[11]||(t[11]=e=>w.edit.Status=e),options:w.statusOptions,label:"Status","emit-value":"","map-options":""},null,8,["modelValue","options"])]),(0,a._)("div",null,[(0,a.Wm)(g,{outlined:"",autofocus:"",type:"textarea",modelValue:w.edit.Comments,"onUpdate:modelValue":t[12]||(t[12]=e=>w.edit.Comments=e),label:"Comments"},null,8,["modelValue"])])])),_:1}),(0,a.Wm)(v,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{flat:"",class:"save-btn q-mr-md",label:"Save",onClick:t[13]||(t[13]=e=>{f.addRow()})}),(0,a.Wm)(b,{flat:"",class:"cancel-btn",label:"Cancel",onClick:t[14]||(t[14]=e=>w.newPopup=!1)})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var w=l(7191),f=l(8308);const h={name:"Stores",meta:{title:"Login â€“ MCI 0.1"},setup(){return{v$:(0,w.ZP)()}},data(){return{filter:"",loading:!1,pagination:{sortBy:"Title",descending:!1,page:1,rowsPerPage:10,rowsNumber:100},columns:[{name:"Title",label:"Title",field:"Title",align:"left"},{name:"Status",label:"Status",field:"Status",align:"left"},{name:"Url",label:"Url",field:"Url",align:"left"},{name:"Action",label:"Action",field:""}],statusOptions:[{label:"Enabled",value:"1"},{label:"Disabled",value:"2"}],data:[],edit:{ID:"",Title:"",Url:"",Token:"",Status:1,Comments:""},newPopup:!1}},validations(){return{edit:{Title:{required:f.C1},Url:{required:f.C1},Token:{required:f.C1}}}},mounted(){this.loadData({pagination:this.pagination,filter:void 0})},methods:{loadData(e){const{page:t,rowsPerPage:l,sortBy:a,descending:o}=e.pagination;e.filter;let i=this;this.$api.post("store/search.php",{Title:this.filter,OrderBy:a,OrderDir:o?"desc":"asc",Page:t,RowsPerPage:l}).then((function(t){i.$helper.updateLoadData(e,t,i)})).catch((function(e){i.$helper.logError(e),i.$q.notify({type:"negative",timeout:3e3,message:"Error loading list",position:"bottom-right"})}))},newRow(){this.edit.Title="",this.edit.Url="",this.edit.Token="",this.edit.Comments="",this.edit.Status="1",this.newPopup=!0},editRow(e){this.edit.ID=e.ID,this.edit.Title=e.Title,this.edit.Token=e.Token,this.edit.Url=e.Url,this.edit.Status=e.Status,this.edit.Comments=e.Comments,e.editPopup=!0},deleteRow(e){let t=this;this.$api.post("store/delete.php",{ID:e}).then((function(e){t.loadData({pagination:t.pagination,filter:t.filter})})).catch((function(e){t.$helper.logError(e),t.$q.notify({type:"negative",timeout:3e3,message:"Delete not possible",position:"bottom-right"})}))},async updateRow(e){let t=this;const l=await this.v$.$validate();l&&this.$api.post("store/update.php",this.edit).then((function(e){t.loadData({pagination:t.pagination,filter:t.filter})})).catch((function(e){t.$helper.logError(e),t.$q.notify({type:"negative",timeout:3e3,message:"Update not possible",position:"bottom-right"})}))},async addRow(){let e=this;const t=await this.v$.$validate();t&&this.$api.post("store/create.php",this.edit).then((function(t){console.log(t),e.loadData({pagination:e.pagination,filter:e.filter}),e.newPopup=!1})).catch((function(t){e.$helper.logError(t),e.$q.notify({type:"negative",timeout:3e3,message:"Update not possible",position:"bottom-right"})}))},displayStatus(e){return e?"1"==e?"Enabled":"2"==e?"Disabled":e:"X"}}};var g=l(4260),b=l(6593),W=l(4842),k=l(4554),U=l(4607),_=l(8186),V=l(3884),v=l(6335),T=l(7011),C=l(3414),$=l(2035),y=l(6778),S=l(151),q=l(5589),P=l(5577),D=l(7518),Z=l.n(D);const Q=(0,g.Z)(h,[["render",c]]),R=Q;Z()(h,"components",{QTable:b.Z,QInput:W.Z,QIcon:k.Z,QBtn:U.Z,QTr:_.Z,QTd:V.Z,QMenu:v.Z,QList:T.Z,QItem:C.Z,QItemSection:$.Z,QDialog:y.Z,QCard:S.Z,QCardSection:q.Z,QSelect:P.Z})}}]);