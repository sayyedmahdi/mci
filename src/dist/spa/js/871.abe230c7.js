"use strict";(globalThis["webpackChunkmci"]=globalThis["webpackChunkmci"]||[]).push([[871],{5871:(e,t,a)=>{a.r(t),a.d(t,{default:()=>R});var l=a(3673),o=a(2323);const i={class:"row"},n={class:"row","data-html2canvas-ignore":""},s=(0,l.Uk)(" New "),d=(0,l.Uk)("Edit"),r=(0,l.Uk)("Delete"),u=(0,l.Uk)(" Gutschein "),p=(0,l.Uk)(" Do you really want to delete the row? "),c=(0,l.Uk)(" New Gutschein ");function m(e,t,a,m,w,f){const h=(0,l.up)("q-icon"),g=(0,l.up)("q-input"),k=(0,l.up)("q-btn"),b=(0,l.up)("q-td"),W=(0,l.up)("q-item-section"),P=(0,l.up)("q-item"),C=(0,l.up)("q-list"),_=(0,l.up)("q-menu"),v=(0,l.up)("q-card-section"),y=(0,l.up)("q-select"),D=(0,l.up)("q-card"),U=(0,l.up)("q-dialog"),V=(0,l.up)("q-tr"),q=(0,l.up)("q-table");return(0,l.wg)(),(0,l.iD)("div",i,[(0,l.Wm)(q,{title:"Gutscheine",rows:w.data,columns:w.columns,"row-key":"ID",pagination:w.pagination,"onUpdate:pagination":t[4]||(t[4]=e=>w.pagination=e),loading:w.loading,filter:w.filter,onRequest:f.loadData,"binary-state-sort":"",style:{width:"100%"},flat:"",separator:"none","table-header-class":"table-header","title-class":"title-class"},{"top-right":(0,l.w5)((()=>[(0,l._)("div",n,[(0,l.Wm)(g,{outlined:"",dense:"",debounce:"300",modelValue:w.filter,"onUpdate:modelValue":t[0]||(t[0]=e=>w.filter=e),placeholder:"Search",class:"Search"},{append:(0,l.w5)((()=>[(0,l.Wm)(h,{name:"search"})])),_:1},8,["modelValue"]),(0,l.Wm)(k,{class:"float-right on-right new-button",onClick:t[1]||(t[1]=e=>f.newRow())},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{name:"add_circle_outline"}),s])),_:1})])])),body:(0,l.w5)((e=>[(0,l.Wm)(V,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{key:"Code",props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.row.Code),1)])),_:2},1032,["props"]),(0,l.Wm)(b,{key:"Packet",props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.row.PacketName),1)])),_:2},1032,["props"]),(0,l.Wm)(b,{key:"Status",props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(f.displayStatus(e.row.Status)),1)])),_:2},1032,["props"]),(0,l.Wm)(b,{key:"User",props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.row.Username),1)])),_:2},1032,["props"]),(0,l.Wm)(b,{key:"Action",props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{flat:"",icon:"more_horiz"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{"auto-close":""},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{dense:"",separator:"",style:{"min-width":"170px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(P,{clickable:"",onClick:t=>f.editRow(e.row)},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"icon",name:"edit"})])),_:1}),(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[d])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(P,{clickable:"",onClick:t=>e.row.deletePopup=!0},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"icon",name:"delete"})])),_:1}),(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[r])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,l.Wm)(U,{modelValue:e.row.editPopup,"onUpdate:modelValue":t=>e.row.editPopup=t,persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{class:"detail-dialog"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{class:"detail-title"},{default:(0,l.w5)((()=>[u])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(g,{outlined:"",autofocus:"",modelValue:w.edit.Code,"onUpdate:modelValue":t[2]||(t[2]=e=>w.edit.Code=e),label:"Code",error:m.v$.edit.Code.$error},null,8,["modelValue","error"])]),(0,l._)("div",null,[(0,l.Wm)(y,{outlined:"","input-class":"inputs","label-color":"grey-5",dense:"",modelValue:w.edit.PacketID,"onUpdate:modelValue":t[3]||(t[3]=e=>w.edit.PacketID=e),options:w.packets,"emit-value":"","map-options":"",label:"Packet"},null,8,["modelValue","options"])])])),_:1}),(0,l.Wm)(v,{align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{flat:"",class:"save-btn q-mr-md",label:"Save",onClick:t=>{f.updateRow(e.row)}},null,8,["onClick"]),(0,l.Wm)(k,{flat:"",class:"cancel-btn",label:"Cancel",onClick:t=>e.row.editPopup=!1},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(U,{modelValue:e.row.deletePopup,"onUpdate:modelValue":t=>e.row.deletePopup=t,persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{class:"detail-dialog"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{class:"detail-title"},{default:(0,l.w5)((()=>[p])),_:1}),(0,l.Wm)(v,{align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{flat:"",class:"delete-btn q-mr-md",label:"Yes, Delete",onClick:t=>{f.deleteRow(e.row.ID),e.row.deletePopup=!1}},null,8,["onClick"]),(0,l.Wm)(k,{flat:"",class:"cancel-btn",label:"No, Cancel",onClick:t=>e.row.deletePopup=!1},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination","loading","filter","onRequest"]),(0,l.Wm)(U,{modelValue:w.newPopup,"onUpdate:modelValue":t[9]||(t[9]=e=>w.newPopup=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{class:"detail-dialog"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{class:"detail-title"},{default:(0,l.w5)((()=>[c])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(g,{outlined:"",autofocus:"",modelValue:w.edit.Code,"onUpdate:modelValue":t[5]||(t[5]=e=>w.edit.Code=e),label:"Code",error:m.v$.edit.Code.$error},null,8,["modelValue","error"])]),(0,l._)("div",null,[(0,l.Wm)(y,{outlined:"","input-class":"inputs","label-color":"grey-5",dense:"",modelValue:w.edit.PacketID,"onUpdate:modelValue":t[6]||(t[6]=e=>w.edit.PacketID=e),options:w.packets,"emit-value":"","map-options":"",label:"Packet"},null,8,["modelValue","options"])])])),_:1}),(0,l.Wm)(v,{align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{flat:"",class:"save-btn q-mr-md",label:"Save",onClick:t[7]||(t[7]=e=>{f.addRow()})}),(0,l.Wm)(k,{flat:"",class:"cancel-btn",label:"Cancel",onClick:t[8]||(t[8]=e=>w.newPopup=!1)})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var w=a(7191),f=a(8308);const h={name:"Packets",meta:{title:"Login â€“ MCI 0.1"},setup(){return{v$:(0,w.ZP)()}},data(){return{filter:"",loading:!1,pagination:{sortBy:"Title",descending:!1,page:1,rowsPerPage:10,rowsNumber:100},columns:[{name:"Code",label:"Code",field:"Code",align:"left"},{name:"Packet",label:"Packet",field:"PacketName",align:"left"},{name:"Status",label:"Status",field:"Status",align:"left"},{name:"User",label:"User",field:"Username",align:"left"},{name:"Action",label:"Action",field:""}],statusOptions:[{label:"Enabled",value:"1"},{label:"Disabled",value:"2"}],data:[],packets:[],edit:{ID:"",Code:"",PacketID:"",Status:1},newPopup:!1}},validations(){return{edit:{Code:{required:f.C1}}}},mounted(){this.loadPackets(),this.loadData({pagination:this.pagination,filter:void 0})},methods:{loadPackets(){let e=this;this.$api.post("packet/search.php",{OrderBy:"Title",OrderDir:"asc",Page:1,RowsPerPage:1e3}).then((function(t){let a=t.data.Data;console.log(a);for(let l=0;l<a.length;++l)e.packets.push({label:a[l].Title,value:a[l].ID})})).catch((function(t){e.$helper.logError(t),e.$q.notify({type:"negative",timeout:3e3,message:"Error loading list",position:"bottom-right"})}))},loadData(e){const{page:t,rowsPerPage:a,sortBy:l,descending:o}=e.pagination;e.filter;let i=this;this.$api.post("gutschein/search.php",{Title:this.filter,OrderBy:l,OrderDir:o?"desc":"asc",Page:t,RowsPerPage:a}).then((function(t){i.$helper.updateLoadData(e,t,i)})).catch((function(e){i.$helper.logError(e),i.$q.notify({type:"negative",timeout:3e3,message:"Error loading list",position:"bottom-right"})}))},newRow(){this.edit.Code="",this.edit.PacketID="",this.edit.Status="1",this.newPopup=!0},editRow(e){this.edit.ID=e.ID,this.edit.Code=e.Code,this.edit.PacketID=e.PacketID,this.edit.Status=e.Status,e.editPopup=!0},deleteRow(e){let t=this;this.$api.post("gutschein/delete.php",{ID:e}).then((function(e){t.loadData({pagination:t.pagination,filter:t.filter})})).catch((function(e){t.$helper.logError(e),t.$q.notify({type:"negative",timeout:3e3,message:"Delete not possible",position:"bottom-right"})}))},async updateRow(e){let t=this;const a=await this.v$.$validate();a&&this.$api.post("gutschein/update.php",this.edit).then((function(e){t.loadData({pagination:t.pagination,filter:t.filter})})).catch((function(e){t.$helper.logError(e),t.$q.notify({type:"negative",timeout:3e3,message:"Update not possible",position:"bottom-right"})}))},async addRow(){let e=this;const t=await this.v$.$validate();t&&this.$api.post("gutschein/create.php",this.edit).then((function(t){console.log(t),e.loadData({pagination:e.pagination,filter:e.filter}),e.newPopup=!1})).catch((function(t){e.$helper.logError(t),e.$q.notify({type:"negative",timeout:3e3,message:"Update not possible",position:"bottom-right"})}))},displayStatus(e){return e?"1"==e?"Free":"2"==e?"Used":e:"X"}}};var g=a(4260),k=a(6593),b=a(4842),W=a(4554),P=a(4607),C=a(8186),_=a(3884),v=a(6335),y=a(7011),D=a(3414),U=a(2035),V=a(6778),q=a(151),$=a(5589),I=a(5577),S=a(7518),Z=a.n(S);const Q=(0,g.Z)(h,[["render",m]]),R=Q;Z()(h,"components",{QTable:k.Z,QInput:b.Z,QIcon:W.Z,QBtn:P.Z,QTr:C.Z,QTd:_.Z,QMenu:v.Z,QList:y.Z,QItem:D.Z,QItemSection:U.Z,QDialog:V.Z,QCard:q.Z,QCardSection:$.Z,QSelect:I.Z})}}]);