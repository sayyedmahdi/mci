"use strict";(globalThis["webpackChunkmci"]=globalThis["webpackChunkmci"]||[]).push([[926],{9926:(e,a,l)=>{l.r(a),l.d(a,{default:()=>A});var t=l(3673),i=l(2323);const o={class:"row wrap-layout"},s={class:"col-12"},n={class:"row","data-html2canvas-ignore":""},d=(0,t.Uk)(" New "),u=(0,t.Uk)("Edit"),r=(0,t.Uk)("Delete"),p=(0,t.Uk)(" User "),m=(0,t.Uk)(" Do you really want to delete the row? "),c=(0,t.Uk)(" New User "),w={class:"q-mb-md"};function h(e,a,l,h,b,f){const g=(0,t.up)("q-select"),v=(0,t.up)("q-icon"),y=(0,t.up)("q-input"),S=(0,t.up)("q-btn"),U=(0,t.up)("q-td"),W=(0,t.up)("q-item-section"),P=(0,t.up)("q-item"),_=(0,t.up)("q-list"),V=(0,t.up)("q-menu"),k=(0,t.up)("q-card-section"),E=(0,t.up)("q-card"),T=(0,t.up)("q-dialog"),q=(0,t.up)("q-tr"),D=(0,t.up)("q-table");return(0,t.wg)(),(0,t.iD)("div",o,[(0,t._)("div",s,[(0,t.Wm)(D,{title:"Users",rows:b.data,columns:b.columns,"row-key":"ID",pagination:b.pagination,"onUpdate:pagination":a[9]||(a[9]=e=>b.pagination=e),loading:b.loading,filter:b.filter,onRequest:f.loadData,"binary-state-sort":"",style:{width:"100%"},flat:"",separator:"none","table-header-class":"table-header","title-class":"title-class"},{"top-right":(0,t.w5)((()=>[(0,t._)("div",n,[(0,t.Wm)(g,{outlined:"",dense:"",modelValue:b.searchParams.Status,"onUpdate:modelValue":a[0]||(a[0]=e=>b.searchParams.Status=e),options:b.searchOptions.Status,label:"Status",class:"Search",style:{"min-width":"150px"},onPopupHide:a[1]||(a[1]=e=>f.onSelect())},null,8,["modelValue","options"]),(0,t.Wm)(g,{outlined:"",dense:"",modelValue:b.searchParams.Type,"onUpdate:modelValue":a[2]||(a[2]=e=>b.searchParams.Type=e),options:b.searchOptions.Type,label:"Type",class:"Search",style:{"min-width":"150px"},onPopupHide:a[3]||(a[3]=e=>f.onSelect())},null,8,["modelValue","options"]),(0,t.Wm)(y,{outlined:"",dense:"",debounce:"300",modelValue:b.filter,"onUpdate:modelValue":a[4]||(a[4]=e=>b.filter=e),placeholder:"Search",class:"Search"},{append:(0,t.w5)((()=>[(0,t.Wm)(v,{name:"search"})])),_:1},8,["modelValue"]),(0,t.Wm)(S,{class:"float-right on-right new-button",label:"",onClick:a[5]||(a[5]=e=>f.newRow())},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{name:"add_circle_outline"}),d])),_:1})])])),body:(0,t.w5)((e=>[(0,t.Wm)(q,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{key:"Username",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.row.Username),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"Email",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.row.Email),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"Type",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(f.displayType(e.row.Type)),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"Status",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(f.displayStatus(e.row.Status)),1)])),_:2},1032,["props"]),(0,t.kq)("",!0),(0,t.kq)("",!0),(0,t.Wm)(U,{key:"Action",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{flat:"",icon:"more_horiz"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{"auto-close":""},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{dense:"",separator:"",style:{"min-width":"170px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{clickable:"",onClick:a=>f.editRow(e.row)},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{class:"icon",name:"edit"})])),_:1}),(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[u])),_:1})])),_:2},1032,["onClick"]),(0,t.Wm)(P,{clickable:"",onClick:a=>e.row.deletePopup=!0},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{class:"icon",name:"delete"})])),_:1}),(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[r])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,t.Wm)(T,{modelValue:e.row.editPopup,"onUpdate:modelValue":a=>e.row.editPopup=a,persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(E,{class:"detail-dialog"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{class:"detail-title"},{default:(0,t.w5)((()=>[p])),_:1}),(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(y,{outlined:"",modelValue:b.edit.Username,"onUpdate:modelValue":a[6]||(a[6]=e=>b.edit.Username=e),readonly:"",label:"Username",error:h.v$.edit.Username.$error},null,8,["modelValue","error"])]),(0,t._)("div",null,[(0,t.Wm)(y,{outlined:"",autofocus:"",modelValue:b.edit.Email,"onUpdate:modelValue":a[7]||(a[7]=e=>b.edit.Email=e),label:"Email",error:h.v$.edit.Email.$error},null,8,["modelValue","error"])]),(0,t._)("div",null,[(0,t.Wm)(g,{outlined:"",modelValue:b.edit.Status,"onUpdate:modelValue":a[8]||(a[8]=e=>b.edit.Status=e),options:b.StatusOptions,label:"Status"},null,8,["modelValue","options"])])])),_:1}),(0,t.Wm)(k,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{flat:"",class:"save-btn q-mr-md",label:"Save",onClick:a=>{f.updateRow(e.row)}},null,8,["onClick"]),(0,t.Wm)(S,{flat:"",class:"cancel-btn",label:"Cancel",onClick:a=>e.row.editPopup=!1},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,t.Wm)(T,{modelValue:e.row.deletePopup,"onUpdate:modelValue":a=>e.row.deletePopup=a,persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(E,{class:"detail-dialog"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{class:"detail-title"},{default:(0,t.w5)((()=>[m])),_:1}),(0,t.Wm)(k,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{flat:"",class:"delete-btn q-mr-md",label:"Yes, Delete",onClick:a=>{f.deleteRow(e.row.ID),e.row.deletePopup=!1}},null,8,["onClick"]),(0,t.Wm)(S,{flat:"",class:"cancel-btn",label:"No, Cancel",onClick:a=>e.row.deletePopup=!1},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination","loading","filter","onRequest"]),(0,t.Wm)(T,{modelValue:b.newPopup,"onUpdate:modelValue":a[17]||(a[17]=e=>b.newPopup=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(E,{class:"detail-dialog"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{class:"detail-title"},{default:(0,t.w5)((()=>[c])),_:1}),(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(y,{outlined:"",modelValue:b.edit.Username,"onUpdate:modelValue":a[10]||(a[10]=e=>b.edit.Username=e),label:"Username",error:h.v$.edit.Username.$error},null,8,["modelValue","error"])]),(0,t._)("div",null,[(0,t.Wm)(y,{outlined:"",modelValue:b.edit.Password,"onUpdate:modelValue":a[11]||(a[11]=e=>b.edit.Password=e),label:"Password",error:h.v$.edit.Password.$error},null,8,["modelValue","error"])]),(0,t._)("div",null,[(0,t.Wm)(y,{outlined:"",autofocus:"",modelValue:b.edit.Email,"onUpdate:modelValue":a[12]||(a[12]=e=>b.edit.Email=e),error:h.v$.edit.Email.$error,label:"Email"},null,8,["modelValue","error"])]),(0,t._)("div",w,[(0,t.Wm)(g,{outlined:"",modelValue:b.edit.Status,"onUpdate:modelValue":a[13]||(a[13]=e=>b.edit.Status=e),options:b.StatusOptions,label:"Status"},null,8,["modelValue","options"])]),(0,t._)("div",null,[(0,t.Wm)(g,{outlined:"",modelValue:b.edit.Type,"onUpdate:modelValue":a[14]||(a[14]=e=>b.edit.Type=e),options:b.TypeOptions,label:"Type"},null,8,["modelValue","options"])])])),_:1}),(0,t.Wm)(k,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{flat:"",class:"save-btn q-mr-md",label:"Save",onClick:a[15]||(a[15]=e=>{f.addRow()})}),(0,t.Wm)(S,{flat:"",class:"cancel-btn",label:"Cancel",onClick:a[16]||(a[16]=e=>b.newPopup=!1)})])),_:1})])),_:1})])),_:1},8,["modelValue"])])])}var b=l(7191),f=l(8308);const g={name:"Users",meta:{title:"Login â€“ FightSearch 0.1"},setup(){return{v$:(0,b.ZP)()}},data(){return{filter:"",searchParams:{Status:{label:"All",value:"0"},Type:{label:"All",value:"0"}},searchOptions:{Status:[{label:"All",value:"0"},{label:"New",value:"1"},{label:"Enabled",value:"2"},{label:"Disabled",value:"3"},{label:"Deleted",value:"4"}],Type:[{label:"All",value:"0"},{label:"Admin",value:"1"},{label:"Enduser",value:"2"}]},StatusOptions:[{label:"New",value:"1"},{label:"Enabled",value:"2"},{label:"Disabled",value:"3"},{label:"Deleted",value:"4"}],TypeOptions:[{label:"Admin",value:"1"}],loading:!1,pagination:{sortBy:"Username",descending:!1,page:1,rowsPerPage:10,rowsNumber:100},columns:[{name:"Username",required:!0,label:"Username",align:"left",sortable:!0},{name:"Email",label:"Email",field:"Email",align:"left"},{name:"Type",label:"Type",field:"Type",align:"left",sortable:!0},{name:"Status",label:"Status",field:"Status",align:"left",sortable:!0},{name:"Action",label:"Action",field:""}],data:[],edit:{Username:"",Email:"",Status:null,Type:null,Password:""},newPopup:!1}},validations(){return{edit:{Username:{required:f.C1},Password:{required:f.C1},Email:{required:f.C1,email:f.Do}}}},mounted(){this.loadData({pagination:this.pagination,filter:void 0})},methods:{onSelect(){this.loadData({pagination:this.pagination,filter:this.filter})},loadData(e){const{page:a,rowsPerPage:l,sortBy:t,descending:i}=e.pagination,o=(e.filter,this.searchParams.Status&&0!=this.searchParams.Status.value?this.searchParams.Status.value:null),s=this.searchParams.Type&&0!=this.searchParams.Type.value?this.searchParams.Type.value:null;let n=this;this.$api.post("user/search.php",{Username:this.filter,Status:o,Type:s,OrderBy:t,OrderDir:i?"desc":"asc",Page:a,RowsPerPage:l}).then((function(a){n.$helper.updateLoadData(e,a,n)})).catch((function(e){n.$helper.logError(e),n.$q.notify({type:"negative",timeout:3e3,message:"Error loading list",position:"bottom-right"})}))},newRow(){this.edit.Username="",this.edit.Email="",this.edit.Password="",this.edit.Status={label:"Enabled",value:"2"},this.edit.Type={label:"Admin",value:"1"},this.newPopup=!0},editRow(e){this.edit.Username=e.Username,this.edit.Email=e.Email,this.edit.Status={label:"New",value:e.Status},2==e.Status&&(this.edit.Status={label:"Enabled",value:e.Status}),3==e.Status&&(this.edit.Status={label:"Disabled",value:e.Status}),4==e.Status&&(this.edit.Status={label:"Deleted",value:e.Status}),e.editPopup=!0},deleteRow(e){let a=this;this.$api.post("user/delete.php",{ID:e}).then((function(e){a.loadData({pagination:a.pagination,filter:a.filter})})).catch((function(e){a.$helper.logError(e),a.$q.notify({type:"negative",timeout:3e3,message:"Delete not possible",position:"bottom-right"})}))},async updateRow(e){let a=this;const l=await this.v$.$validate();l&&this.$api.post("user/update.php",{ID:e.ID,Username:this.edit.Username,Email:this.edit.Email,Status:this.edit.Status.value}).then((function(e){a.loadData({pagination:a.pagination,filter:a.filter}),a.newPopup=!1})).catch((function(e){a.$helper.logError(e),a.$q.notify({type:"negative",timeout:3e3,message:"Update not possible",position:"bottom-right"})}))},async addRow(){let e=this;const a=await this.v$.$validate();a&&this.$api.post("user/create.php",{Username:this.edit.Username,Email:this.edit.Email,Password:this.edit.Password,Status:this.edit.Status.value,Type:this.edit.Type.value}).then((function(a){e.loadData({pagination:e.pagination,filter:e.filter}),e.newPopup=!1})).catch((function(a){e.$helper.logError(a),e.$q.notify({type:"negative",timeout:3e3,message:"Update not possible",position:"bottom-right"})}))},displayStatus(e){return e?"1"==e?"New":"2"==e?"Enabled":"3"==e?"Disabled":"4"==e?"Deleted":e:"X"},displayType(e){return e?1==e?"Admin":2==e?"Enduser":e:""}}};var v=l(4260),y=l(6593),S=l(5577),U=l(4842),W=l(4554),P=l(4607),_=l(8186),V=l(3884),k=l(6335),E=l(7011),T=l(3414),q=l(2035),D=l(6778),$=l(151),C=l(5589),Z=l(7518),Q=l.n(Z);const R=(0,v.Z)(g,[["render",h]]),A=R;Q()(g,"components",{QTable:y.Z,QSelect:S.Z,QInput:U.Z,QIcon:W.Z,QBtn:P.Z,QTr:_.Z,QTd:V.Z,QMenu:k.Z,QList:E.Z,QItem:T.Z,QItemSection:q.Z,QDialog:D.Z,QCard:$.Z,QCardSection:C.Z})}}]);